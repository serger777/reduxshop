(this.webpackJsonpreduxer=this.webpackJsonpreduxer||[]).push([[0],{14:function(e,t,n){e.exports={item:"book-list-item_item__pgd4W",wrap:"book-list-item_wrap__im8C7",image:"book-list-item_image__2rBfG"}},22:function(e,t,n){e.exports={header:"Header_header__3GuQT",link:"Header_link__TgU06"}},25:function(e,t,n){e.exports={wrap:"book-list_wrap__3RFH-",item:"book-list_item__3E1T7"}},32:function(e,t,n){e.exports={main:"app_main__3o7BM"}},34:function(e,t,n){e.exports=n(44)},44:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(17),i=n.n(c),l=n(7),u=n(13),s=n(8),m=o.a.createContext(),d=m.Provider,p=m.Consumer,E=function(){return function(e){return function(t){return o.a.createElement(p,null,(function(n){return o.a.createElement(e,Object.assign({},t,{bookstoreService:n}))}))}}},f=n(11),_=n(12),b=n(20),h=n(19),O=n(21),v=n(9),g=n(14),k=n.n(g),T=function(e){var t=e.book,n=e.onAddedToCart,a=t.title,r=t.author,c=t.price,i=t.imgUrl;return o.a.createElement("div",{className:k.a.wrap},o.a.createElement("img",{className:k.a.image,src:i,alt:""}),o.a.createElement("span",{className:k.a.item},"title: ",a),o.a.createElement("span",{className:k.a.item},"author: ",r),o.a.createElement("span",{className:k.a.item},"price: ",c),o.a.createElement("button",{onClick:n},"add"))},C=function(e){return{type:"BOOK_ADDED_TO_CART",payload:e}},y=function(e){return function(){return function(t){t({type:"FETCH_BOOKS_REQUESTED"}),e.getBooks().then((function(e){return t({type:"FETCH_BOOKS_SUCCES",payload:e})})).catch((function(e){return t({type:"FETCH_BOOKS_FAILURE",payload:e})}))}}},j=n(25),N=n.n(j),S=function(){return o.a.createElement("div",null,"loading...")},A=function(e){return o.a.createElement("div",null," ",e.error," ")},w=function(e){var t=e.books,n=e.onAddedToCart;return o.a.createElement("ul",{className:N.a.wrap},t.map((function(e){return o.a.createElement("li",{className:N.a.item,key:e.id},o.a.createElement(T,{book:e,onAddedToCart:function(){return n(e.id)}}))})))},B=function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchBooks()}},{key:"render",value:function(){var e=this.props,t=e.books,n=e.loading,a=e.error,r=e.onAddedToCart;return n?o.a.createElement(S,null):a?o.a.createElement(A,{error:a.message}):o.a.createElement(w,{books:t,onAddedToCart:r})}}]),t}(r.Component),D=E()(Object(l.b)((function(e){var t=e.bookList;return{books:t.books,loading:t.loading,error:t.error}}),(function(e,t){var n=t.bookstoreService;return Object(v.b)({fetchBooks:y(n),onAddedToCart:C},e)}))(B)),L=function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Home page"),o.a.createElement(D,null))},R=function(){return o.a.createElement("h2",null,"Cart page")},H=n(22),I=n.n(H),x=Object(l.b)((function(e){var t=e.shoppingCart,n=t.cartItems,a=t.countTotal;return{numItems:n.length,countTotal:a}}))((function(e){var t=e.numItems,n=e.countTotal;return o.a.createElement("header",{className:I.a.header},o.a.createElement(u.b,{className:I.a.link,to:"/"},o.a.createElement("h3",null,"SHOP")),o.a.createElement(u.b,{className:I.a.link,to:"cart"},t>0&&o.a.createElement("p",null,t," items ",n)))})),F=n(32),K=n.n(F),U=n(5),M=n.n(U),P={dec:C,inc:function(e){return{type:"BOOK_DEC_TO_CART",payload:e}},dell:function(e){return{type:"ALL_BOOKS_REMOVED_FROM_CART",payload:e}}},Q=Object(l.b)((function(e){var t=e.shoppingCart;return{items:t.cartItems,total:t.orderTotal}}),P)((function(e){var t=e.items,n=e.total,a=e.inc,r=e.dec,c=e.dell;return o.a.createElement("div",{className:M.a.wrap},o.a.createElement("div",{className:M.a.wrap_item},o.a.createElement("div",{className:M.a.item},"title"),o.a.createElement("div",{className:M.a.item},"total "),o.a.createElement("div",{className:M.a.item},"count"),o.a.createElement("div",{className:M.a.item})),t.map((function(e){var t=e.id,n=e.title,i=e.count,l=e.price;return o.a.createElement("div",{className:M.a.wrap_item,key:t},o.a.createElement("div",{className:M.a.item},n),o.a.createElement("div",{className:M.a.item},l,"$ "),o.a.createElement("div",{className:M.a.item},o.a.createElement("span",null,i)),o.a.createElement("div",{className:"wrap-button"},o.a.createElement("button",{onClick:function(){return a(t)}},"-"),o.a.createElement("button",{onClick:function(){return r(t)}},"+"),o.a.createElement("button",{onClick:function(){return c(t)}},"del")))})),o.a.createElement("div",{className:M.a.order_tottal},"TOTAL: ",n,"$"))})),G=function(){return o.a.createElement("div",null,o.a.createElement("h2",null,"Shoping cart"),o.a.createElement(Q,null))},J=E()((function(){return o.a.createElement("main",{className:K.a.main},o.a.createElement(x,null),o.a.createElement(s.c,null,o.a.createElement(s.a,{path:"/",component:L,exact:!0}),o.a.createElement(s.a,{path:"/cart",component:R,exact:!0})),o.a.createElement(G,null))})),z=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},n}return Object(O.a)(t,e),Object(_.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?o.a.createElement(A,null):this.props.children}}]),t}(r.Component),V=function(){function e(){Object(f.a)(this,e),this.data=[{id:1,title:"js book",author:"sergey gerasimov",price:22,imgUrl:"https://cdn1.ozone.ru/multimedia/c1200/1019046801.jpg"},{id:2,title:"frontend middle",author:"sergey gerasimov",price:25,imgUrl:"https://cdn1.ozone.ru/multimedia/c1200/1019046801.jpg"}]}return Object(_.a)(e,[{key:"getBooks",value:function(){var e=this;return new Promise((function(t,n){setTimeout((function(){t(e.data)}),700)}))}}]),e}(),X=n(33),$=function(e,t){if(void 0===e)return{books:[],loading:!0,error:null};switch(t.type){case"FETCH_BOOKS_REQUESTED":return{books:[],loading:!0,error:null};case"FETCH_BOOKS_SUCCES":return{books:t.payload,loading:!1,error:null};case"FETCH_BOOKS_FAILURE":return{books:[],loading:!1,error:t.payload};default:return e.bookList}},W=n(15),Y=function(e,t,n){return 0===t.count?[].concat(Object(W.a)(e.slice(0,n)),Object(W.a)(e.slice(n+1))):-1===n?[].concat(Object(W.a)(e),[t]):[].concat(Object(W.a)(e.slice(0,n)),[t],Object(W.a)(e.slice(n+1)))},q=function(e,t,n){var a=e.bookList.books,r=e.shoppingCart,o=r.cartItems,c=r.orderTotal,i=r.countTotal,l=a.find((function(e){return e.id===t})),u=o.findIndex((function(e){return e.id===t})),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=t.id,r=void 0===a?e.id:a,o=t.count,c=void 0===o?0:o,i=t.title,l=void 0===i?e.title:i,u=t.price,s=void 0===u?0:u;return{id:r,title:l,count:c+n,price:s+e.price*n}}(l,o[u],n);return{orderTotal:c+l.price*n,countTotal:i+1*n,cartItems:Y(o,s,u)}},Z=function(e,t){if(void 0===e)return{cartItems:[],orderTotal:0,countTotal:0};switch(t.type){case"BOOK_ADDED_TO_CART":return q(e,t.payload,1);case"BOOK_DEC_TO_CART":return q(e,t.payload,-1);case"ALL_BOOKS_REMOVED_FROM_CART":var n=e.shoppingCart.cartItems.find((function(e){return e.id===t.payload}));return q(e,t.payload,-n.count);default:return e.shoppingCart}},ee=function(e,t){return{bookList:$(e,t),shoppingCart:Z(e,t)}},te=Object(v.c)(ee,Object(v.a)(X.a,(function(e){e.getState;return function(e){return function(t){return e(t)}}})));te.dispatch((a=2e3,function(e){setTimeout((function(){e({type:"DELAYD_ACTION"})}),a)}));var ne=te,ae=new V;i.a.render(o.a.createElement(l.a,{store:ne},o.a.createElement(z,null,o.a.createElement(d,{value:ae},o.a.createElement(u.a,null,o.a.createElement(J,null))))),document.getElementById("root"))},5:function(e,t,n){e.exports={wrap:"ShopingList_wrap__-iXXF",wrap_item:"ShopingList_wrap_item__16HgJ",item:"ShopingList_item__18GPi",order_tottal:"ShopingList_order_tottal__H3QTf"}}},[[34,1,2]]]);
//# sourceMappingURL=main.45e2e2eb.chunk.js.map